[env:esp32-s3-devkitc-1-n16r8]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; Match the ESP32-S3-WROOM-1 N16R8 module (16MB flash, 8MB PSRAM)
board_build.flash_size = 16MB
board_build.psram = enabled

; Enable NimBLE stack
build_flags = 
    -D CONFIG_BT_ENABLED=1
    -D CONFIG_BT_NIMBLE_ENABLED=1
    -D CONFIG_BT_BLUEDROID_ENABLED=0
    -D CONFIG_BT_CONTROLLER_ENABLED=1
    -D CORE_DEBUG_LEVEL=3

; Monitor configuration
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

; Upload configuration
upload_speed = 921600

; Dependencies
lib_deps = 
    h2zero/NimBLE-Arduino @ ^1.4.1

[env:native]
platform = native
test_framework = unity
build_flags = 
    -std=c++11
    -D UNITY_INCLUDE_CONFIG_H
build_src_filter = 
    +<*>
    -<main.cpp>